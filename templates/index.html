<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üå± SIH Project Dashboard</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { color: #2c3e50; }
    .section { margin-bottom: 40px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
    .result { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 6px; }
  </style>
</head>
<body>

  <h1>üå± Smart Farming Dashboard</h1>

  <!-- Plant Disease -->
  <div class="section">
    <h2>üåø Plant Disease Detection</h2>
    <form id="plant-form">
      <input type="file" name="file" required>
      <button type="submit">Predict</button>
    </form>
    <div id="plant-result" class="result"></div>
  </div>

  <!-- Hyperspectral -->
  <div class="section">
    <h2>üåà Hyperspectral Analysis</h2>
    <textarea id="spectral-data" rows="3" cols="50" placeholder="Enter comma-separated spectral values"></textarea><br>
    <button id="hyperspectral-btn">Predict</button>
    <div id="hyperspectral-result" class="result"></div>
  </div>

  <!-- NASA POWER -->
  <div class="section">
    <h2>‚òÄÔ∏è NASA POWER Weather + Gemini Analysis</h2>
    <input type="text" id="lat" placeholder="Latitude">
    <input type="text" id="lon" placeholder="Longitude">
    <button id="nasa-btn">Fetch Data</button>
    <div id="nasa-result" class="result"></div>
  </div>

  <script>
    // Plant Disease
    $("#plant-form").submit(function(e) {
      e.preventDefault();
      let formData = new FormData(this);
      $.ajax({
        url: "/predict/plant",
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function(res) {
          $("#plant-result").html("Result: " + JSON.stringify(res));
        }
      });
    });

    // Hyperspectral
    $("#hyperspectral-btn").click(function() {
      let values = $("#spectral-data").val().split(",").map(Number);
      $.ajax({
        url: "/predict/hyperspectral",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({spectral_data: values}),
        success: function(res) {
          $("#hyperspectral-result").html("Result: " + JSON.stringify(res));
        }
      });
    });

    // NASA POWER
    $("#nasa-btn").click(function() {
      let lat = $("#lat").val();
      let lon = $("#lon").val();
      $.ajax({
        url: "/nasa-data",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({lat: lat, lon: lon}),
        success: function(res) {
          $("#nasa-result").html("Result: " + JSON.stringify(res));
        }
      });
    });
  </script>

</body>
</html>
